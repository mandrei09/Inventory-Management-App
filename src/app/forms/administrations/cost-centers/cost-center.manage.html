<div *transloco="let t; read: 'page_cost_center_component'" style="height: 100%;">
  <div class="content-page-header">
    <app-common-header
      (filterChanged)="doSimpleSearch($event)"
      (addNew)="onAddNew()">
    </app-common-header>
  </div>

  <div class="content-page-header-two d-flex">
    <div class="left-actions d-flex">
      <div class="refresh subheader-actions-wrapper">
        <a>
          <svg width="17" height="18" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.6719 3.32812L16.0156 0.984375V8.01562H8.98438L12.2188 4.78125C11.0312 3.59375 9.625 3 8 3C6.34375 3 4.92188 3.59375 3.73438 4.78125C2.57812 5.9375 2 7.34375 2 9C2 10.6562 2.57812 12.0781 3.73438 13.2656C4.92188 14.4219 6.34375 15 8 15C9.15625 15 10.2812 14.6094 11.375 13.8281C12.5 13.0469 13.2656 12.1094 13.6719 11.0156H15.7344C15.2969 12.7656 14.3594 14.2031 12.9219 15.3281C11.4844 16.4531 9.84375 17.0156 8 17.0156C5.8125 17.0156 3.9375 16.2344 2.375 14.6719C0.8125 13.1094 0.03125 11.2188 0.03125 9C0.03125 6.78125 0.8125 4.89062 2.375 3.32812C3.9375 1.76563 5.8125 0.984375 8 0.984375C8.9375 0.984375 9.95312 1.21875 11.0469 1.6875C12.1719 2.125 13.0469 2.67188 13.6719 3.32812Z"/>
          </svg>
        </a>
      </div>
      <div hideIfUnauthorized="EXPORT|COSTCENTERS" class="refresh subheader-actions-wrapper subheader-action-text_inline" style="min-width: auto;">
        <a (click)="export()" class="d-flex" style="color: inherit;">
          <svg xmlns="http://www.w3.org/2000/svg" width="23" height="22" viewBox="0 0 24 24"> <g> <path fill="none" d="M0 0h24v24H0z"/> <path d="M2.859 2.877l12.57-1.795a.5.5 0 0 1 .571.495v20.846a.5.5 0 0 1-.57.495L2.858 21.123a1 1 0 0 1-.859-.99V3.867a1 1 0 0 1 .859-.99zM4 4.735v14.53l10 1.429V3.306L4 4.735zM17 19h3V5h-3V3h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-4v-2zm-6.8-7l2.8 4h-2.4L9 13.714 7.4 16H5l2.8-4L5 8h2.4L9 10.286 10.6 8H13l-2.8 4z"/> </g> </svg>
          Export
        </a>
      </div>
      <div hideIfUnauthorized="EXPORT|COSTCENTERS" class="refresh subheader-actions-wrapper">
        <a (click)="uploadFile()">
          <svg width="17" height="18" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 5px;">
            <path d="M6.65625 6.4375L8.40625 4.71875L9.34375 5.65625L6 9L2.65625 5.65625L3.59375 4.71875L5.34375 6.4375V0H6.65625V6.4375ZM10.6562 6H12V10.6562C12 11.0104 11.8646 11.3229 11.5938 11.5938C11.3229 11.8646 11.0104 12 10.6562 12H1.34375C0.989583 12 0.677083 11.8646 0.40625 11.5938C0.135417 11.3229 0 11.0104 0 10.6562V6H1.34375V10.6562H10.6562V6Z"/>
          </svg>
          Import
        </a>
      </div>
    </div>
    <div class="results">
      <span>{{costCenterList.totalItems}} {{ t('table_results_text') }}</span>
    </div>
  </div>
  <app-cost-center-list #costCenterList id="costCenterList"
                        [dataSource]="costCenterHttpService"
                        dynamicQuery="true"
                        usePaging="true"
                        showSimpleSearch="false"
                        showEditAction="true"
                        showDeleteAction="true"
                        [itemAddedEvent]="itemAddedEvent"
                        [itemUpdatedEvent]="itemUpdatedEvent"
                        [itemDeletedEvent]="itemDeletedEvent"
                        [requestSelectionEvent]="requestSelectionEvent"
                        [requestRefreshEvent]="requestRefreshEvent"
                        (selectionChanged)="setSelectedItem($event)"
                        rowSelection="single"
                        notifyOnChange="true"
                        (itemEdit)="onItemEdit($event)"
                        (itemDelete)="onItemDelete($event)"
  >
  </app-cost-center-list>
</div>




<!--<div class="animated fadeIn">-->
<!--  <br>-->
<!--  <div class="card">-->
<!--    <div class="card-header">-->
<!--      <button type="button" class="btn btn-outline-secondary" (click)="isCollapsed = !isCollapsed">Filtre </button>-->
<!--      <div class="card-header-actions">-->
<!--        <div class="input-group">-->
<!--          <input type="text" class="form-control" placeholder="Search..." aria-label="Search..." aria-describedby="basic-addon2" [(ngModel)]="filter" (change)="doSimpleSearch(filter)">-->
<!--          <div class="input-group-append">-->
<!--            &nbsp;-->
<!--            <button hideIfUnauthorized="ADD|COSTCENTERS" type="button" class="btn btn-outline-info btn-sm" (click)="addNewItem()"><i class="fa fa-plus"></i>&nbsp;Adauga</button>-->
<!--            &nbsp;-->
<!--            <button hideIfUnauthorized="EDIT|COSTCENTERS" type="button" class="btn btn-outline-danger btn-sm" (click)="editItem()" [disabled]="!selectedItem" ><i class="fa fa-edit"></i>&nbsp;Modifica</button>-->
<!--            &nbsp;-->
<!--            <button hideIfUnauthorized="EXPORT|COSTCENTERS"type="button" class="btn btn-outline-success btn-sm" (click)="exportToExcel()"><i class="fa fa-file-excel-o"></i>&nbsp;Export</button>-->
<!--            &nbsp; &nbsp;-->
<!--            <button type="button" class="btn btn-outline-success btn-sm" (click)="uploadFile()" style="background-color: rgb(0, 130, 19);color: white;" ><i class="fa fa-upload"></i> Import</button>-->

<!--          </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--    <div class="card-body"-->
<!--         (collapsed)="collapsed($event)"-->
<!--         (expanded)="expanded($event)"-->
<!--         [collapse]="isCollapsed">-->
<!--         <div class="card-body-actions">-->

<!--      </div>-->
<!--    </div>-->
<!--    <div class="card-footer">-->
<!--      <div class="col-sm-12">-->
<!--        <app-cost-center-list #costCenterList id="costCenterList"-->
<!--                  [dataSource]="costCenterHttpService"-->
<!--                  dynamicQuery="true"-->
<!--                  usePaging="true"-->
<!--                  showSimpleSearch="false"-->
<!--                  [itemAddedEvent]="itemAddedEvent"-->
<!--                  [itemUpdatedEvent]="itemUpdatedEvent"-->
<!--                  [itemDeletedEvent]="itemDeletedEvent"-->
<!--                  [requestSelectionEvent]="requestSelectionEvent"-->
<!--                  [requestRefreshEvent]="requestRefreshEvent"-->
<!--                  (selectionChanged)="setSelectedItem($event)"-->
<!--                  rowSelection="single"-->
<!--                  notifyOnChange="true">-->
<!--              </app-cost-center-list>-->
<!--        </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->


<div class="modal fade" bsModal #costCenterDetailModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dark">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title pull-left">Detalii centru de cost</h4>
      </div>
      <div class="modal-body">
        <app-cost-center-detail #costCenterDetail id="costCenterDetail"
            [dataSource]="costCenterHttpService"
            [addNewItemEvent]="addNewItemEvent"
            [editItemEvent]="editItemEvent"
            (itemAdded)="itemAdded($event)"
            (itemUpdated)="itemUpdated($event)"
            (itemDeleted)="itemDeleted($event)"
            (changesCanceled)="detailTerminate()"
            (administrationNeeded)="onCostCenterDetailAdministrationNeeded()"
            (roomNeeded)="onCostCenterDetailRoomNeeded()"
            (divisionNeeded)="onCostCenterDetailDivisionNeeded()"
            (regionNeeded)="onCostCenterDetailRegionNeeded()"
            (admCenterNeeded)="onCostCenterDetailAdmCenterNeeded()">
        </app-cost-center-detail>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" bsModal #admCenterListModal="bs-modal"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
     <div class="modal-dialog modal-info" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Profit Ctr</h4>
                <button type="button" class="close" (click)="admCenterListModal.hide()" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <app-adm-center-list #admCenterList id="admCenterList"
                    [dataSource]="admCenterHttpService"
                    rowSelection="single"
                    notifyOnChange="false"
                    usePaging="true">
                </app-adm-center-list>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="setSelectedAdmCenters()">Selecteaza</button>
                <button type="button" class="btn btn-info" (click)="onAdmCenterListCancel()">Inchide</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" bsModal #regionListModal="bs-modal"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
     <div class="modal-dialog modal-info" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">PC Detaliu</h4>
                <button type="button" class="close" (click)="regionListModal.hide()" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <app-region-list #regionList id="regionList"
                    [dataSource]="regionHttpService"
                    rowSelection="single"
                    notifyOnChange="false"
                    usePaging="true">
                </app-region-list>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="setSelectedRegions()">Selecteaza</button>
                <button type="button" class="btn btn-info" (click)="onRegionListCancel()">Inchide</button>
            </div>
        </div>
    </div>
</div>


<!-- <div class="modal fade" bsModal #employeeListModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dark">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">User 1</h4>
            </div>
            <div class="modal-body">
                <app-employee-list #employeeList id="employeeList"
                    [dataSource]="employeeHttpService"
                    rowSelection="single"
                    notifyOnChange="false"
                    usePaging="true">
                </app-employee-list>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-success btn-sm" (click)="setSelectedEmployee()">Select</button>
                <button type="button" class="btn btn-outline-primary btn-sm" (click)="onEmployeeListCancel()">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" bsModal #employee2ListModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dark">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">User 2</h4>
            </div>
            <div class="modal-body">
                <app-employee-list #employee2List id="employee2List"
                    [dataSource]="employeeHttpService"
                    rowSelection="single"
                    notifyOnChange="false"
                    usePaging="true">
                </app-employee-list>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-success btn-sm" (click)="setSelectedEmployee2()">Select</button>
                <button type="button" class="btn btn-outline-primary btn-sm" (click)="onEmployee2ListCancel()">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" bsModal #employee3ListModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dark">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">User 3</h4>
            </div>
            <div class="modal-body">
                <app-employee-list #employee3List id="employee3List"
                    [dataSource]="employeeHttpService"
                    rowSelection="single"
                    notifyOnChange="false"
                    usePaging="true">
                </app-employee-list>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-success btn-sm" (click)="setSelectedEmployee3()">Select</button>
                <button type="button" class="btn btn-outline-primary btn-sm" (click)="onEmployee3ListCancel()">Close</button>
            </div>
        </div>
    </div>
</div> -->

<div class="modal fade" bsModal #administrationListModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dark">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Locatie</h4>
            </div>
            <div class="modal-body">
                <app-administration-list #administrationList id="administrationList"
                    [dataSource]="administrationHttpService"
                    rowSelection="single"
                    notifyOnChange="false"
                    usePaging="true">
                </app-administration-list>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-success btn-sm" (click)="setSelectedAdministration()">Select</button>
                <button type="button" class="btn btn-outline-primary btn-sm" (click)="onAdministrationListCancel()">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" bsModal #roomListModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dark">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Adresa</h4>
            </div>
            <div class="modal-body">
                <app-room-list #roomList id="roomList"
                    [dataSource]="roomHttpService"
                    rowSelection="single"
                    notifyOnChange="false"
                    usePaging="true">
                </app-room-list>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-success btn-sm" (click)="setSelectedRoom()">Select</button>
                <button type="button" class="btn btn-outline-primary btn-sm" (click)="onRoomListCancel()">Close</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" bsModal #divisionListModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dark">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Departament</h4>
            </div>
            <div class="modal-body">
                <app-division-list #divisionList id="divisionList"
                    [dataSource]="divisionHttpService"
                    rowSelection="single"
                    notifyOnChange="false"
                    usePaging="true">
                </app-division-list>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-success btn-sm" (click)="setSelectedDivisions()">Select</button>
                <button type="button" class="btn btn-outline-primary btn-sm" (click)="onDivisionListCancel()">Close</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" bsModal #uploadModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Incarca fisier</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <h3>Import active</h3>
                          <input #fileEvent type="file" (change)="loadFile($event)" data-toggle="tooltip" placeholder="Incarca..."/>
                          <div class="row">
                              <br>
                          </div>

                          <!-- <button type="button" class="btn btn-outline-success btn-sm" (click)="uploadBudget()" [disabled]="((fileEventBudget === null) || (fileEventBudget === undefined))"  [style.backgroundColor] = "'rgb(0, 130, 19)'" [style.color]="'white'"><i class="fa fa-upload"></i>&nbsp; Import</button>
                          &nbsp;
                          <button type="button" class="btn btn-success btn-sm" (click)="exportTemplate()" [style.backgroundColor] = "'rgb(0, 130, 19)'" [style.color]="'white'" [disabled]="!exportCompleted" ><i class="fa fa-download"></i> &nbsp; Model import </button> -->
                      </div>
                  </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-outline-success btn-sm" (click)="uploadModal.hide()">Inchide</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" bsModal #importDataModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title pull-left">Import centre de cost...</h4>
      </div>
      <div class="modal-body">
          <progressbar [max]="noOfItems" [value]="importIndex" type="success"
          ><b>{{ importIndex }} / {{ noOfItems }}</b></progressbar
        >
      </div>
    </div>
  </div>
</div>
